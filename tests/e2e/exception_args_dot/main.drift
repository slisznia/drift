import std.console.out

exception DotErr(a: String, b: String)

fn raise_dot() returns Void {
    throw DotErr(a = "alpha", b = "beta")
}

fn main() returns Int {
    try {
        raise_dot()
    } catch DotErr(e) {
        val _a = e.attrs["a"].as_string().unwrap_or("<missing>")
        val _b = e.attrs["b"].as_string().unwrap_or("<missing>")
        out.writeln("caught")
        out.writeln(_a)
        out.writeln(_b)
        return 0
    }
    out.writeln("no error")
    return 1
}
