import std.console.out;

fn foo(x: Int) -> Int {
  if x != 0 {
    throw drift_error_new_dummy(x, "payload", "")
  }
  return x
}

fn might_fail(x: Int) -> Int {
  if x != 0 {
    throw drift_error_new_dummy(x, "payload", "")
  }
  return x
}

fn main() -> Int {
  val y: Int = try foo(1) catch { 42; }
  out.writeln("computed y")

  try {
    out.writeln("before")
    might_fail(1)
  } catch err {
    out.writeln("caught")
  }

  val rc: Int = 0
  return rc
}
