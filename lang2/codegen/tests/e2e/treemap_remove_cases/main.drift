module main

import std.containers as containers;

fn run() -> Int {
	var m = containers.tree_map_new<type Int, Int>();
	m.insert(2, 20);
	m.insert(1, 10);
	m.insert(3, 30);
	m.insert(4, 40);
	m.insert(5, 50);
	if m.len() != 5 {
		return 1;
	}
	val k5: Int = 5;
	val v5: Int = match m.remove(&k5) {
		None => { -1 },
		Some(v) => { v }
	};
	if v5 != 50 {
		return 2;
	}
	if m.contains_key(&k5) {
		return 3;
	}
	val k3: Int = 3;
	val v3: Int = match m.remove(&k3) {
		None => { -1 },
		Some(v) => { v }
	};
	if v3 != 30 {
		return 4;
	}
	if m.contains_key(&k3) {
		return 5;
	}
	val k2: Int = 2;
	val v2: Int = match m.remove(&k2) {
		None => { -1 },
		Some(v) => { v }
	};
	if v2 != 20 {
		return 6;
	}
	if m.contains_key(&k2) {
		return 7;
	}
	if m.len() != 2 {
		return 8;
	}
	val k1: Int = 1;
	val k4: Int = 4;
	if not m.contains_key(&k1) {
		return 9;
	}
	if not m.contains_key(&k4) {
		return 10;
	}
	return 0;
}

fn main() nothrow -> Int {
	return try run() catch { 99 };
}
