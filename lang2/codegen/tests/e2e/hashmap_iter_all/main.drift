module main

import std.containers as containers;
import std.iter as iter;
use trait iter.SinglePassIterator;

fn run() -> Int {
	var m = containers.hash_map<type Int, Int>();
	var i = 0;
	while i < 10 {
		m.insert(i, i * 2);
		i = i + 1;
	}
	var it = m.iter();
	var count = 0;
	var done = false;
	while not done {
		val nxt = it.next();
		match nxt {
			None => { done = true; },
			Some(_) => {
				count = count + 1;
			}
		}
	}
	if count != 10 { return 1; }
	return 0;
}

fn main() nothrow -> Int {
	return try run() catch { 99 };
}
