module main

import std.err;
import std.iter as iter;
import std.containers;

fn main() -> Int {
val dq: std.containers.Deque<Int> = std.containers.deque_new<type Int>();
	dq.push_back(1);
	dq.push_back(2);
	var r = dq.range_mut();
	r.__test_invalidate();
	val out: Int = try {
		iter.RandomAccessPermutable::swap(&mut r, 0, 0);
		0
	} catch std.err:IteratorInvalidated(e) {
		val dv_c = e.attrs["container_id"];
		val dv_o = e.attrs["op_id"];
		val c = dv_c.as_string();
		val o = dv_o.as_int();
		val c_code: Int = match c {
			Some(s) => {
				(s != "std.containers:Deque") ? 10 : 0
			},
			None => {
				11
			},
		};
		val o_code: Int = match o {
			Some(v) => {
				(v != 4) ? 12 : 0
			},
			None => {
				13
			},
		};
		(c_code != 0) ? c_code : ((o_code != 0) ? o_code : 0)
	} catch {
		99
	};
	return out;
}
