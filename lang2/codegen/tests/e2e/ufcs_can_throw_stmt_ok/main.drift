module main

exception Fail()

trait Boom {
	fn boom(self: &Self) -> Void
}

struct S(x: Int)

implement Boom for S {
	fn boom(self: &S) -> Void {
		throw Fail();
	}
}

fn main() nothrow -> Int{
	val s: S = S(1);
	val r: &S = &s;
	try {
		Boom::boom(r);
		return 0;
	} catch {
		return 2;
	}
}
