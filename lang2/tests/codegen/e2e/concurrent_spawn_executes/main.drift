module main

import std.core as core;
import lang.thread as thread;

fn main() nothrow -> Int {
	var cb = core.callback0(| | => { eprintln("spawned"); return; });
	var exec = thread.exec_default_get();
	var h = thread.vt_spawn(cb, exec);
	val _rc = thread.exec_submit(exec, h);
	thread.vt_join(h);
	println("done");
	return 0;
}
