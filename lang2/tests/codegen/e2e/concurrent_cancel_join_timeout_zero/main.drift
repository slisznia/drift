module m

import std.concurrent as conc;
import lang.thread as thread;

pub fn main() nothrow -> Int {
	var t = conc.spawn(| | => {
		thread.vt_park_until(10);
		return 5;
	});
	t.cancel();
	var res = t.join_timeout(conc.Duration(millis = 0));
	return match res {
		Err(err) => {
			match err {
				Cancelled => { 0 },
				Timeout => { 1 },
				default => { 2 },
			}
		},
		Ok(_v) => { 3 },
		default => { 4 },
	};
}
