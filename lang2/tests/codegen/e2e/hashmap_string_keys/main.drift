module main

import std.containers as containers;

fn run() -> Int {
	var m = containers.hash_map<type String, Int>();
	m.insert("ab", 1);
	m.insert("a", 2);
	val k1: String = "ab";
	val k2: String = "a";
	val v1: Int = match m.get_mut(&k1) { None => { -1 }, Some(v) => { *v } };
	val v2: Int = match m.get_mut(&k2) { None => { -1 }, Some(v) => { *v } };
	if v1 == -1 {
		return 1;
	}
	if v2 == -1 {
		return 2;
	}
	if v1 != 1 {
		return 3;
	}
	if v2 != 2 {
		return 4;
	}
	val r1: Int = match m.remove(&k1) { None => { -1 }, Some(v) => { v } };
	if r1 == -1 {
		return 5;
	}
	if r1 != 1 {
		return 6;
	}
	if m.contains_key(&k1) {
		return 7;
	}
	return 0;
}

fn main() nothrow -> Int {
	return try run() catch { 99 };
}
