module main

import std.containers as containers;

fn run() -> Int {
	var m = containers.hash_map<type Int, Int>();
	m.insert(1, 10);
	m.insert(2, 20);
	m.insert(3, 30);
	m.clear();
	if m.len() != 0 { return 1; }
	val k2 = 2;
	val got = m.get_mut(&k2);
	match got {
		None => { },
		Some(_v) => { return 2; }
	}
	m.insert(4, 40);
	val k4 = 4;
	val got2 = m.get_mut(&k4);
	match got2 {
		None => { return 3; },
		Some(v) => { if *v != 40 { return 4; } }
	}
	return 0;
}

fn main() nothrow -> Int {
	return try run() catch { 99 };
}
