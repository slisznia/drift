# vim: set noexpandtab: -*- indent-tabs-mode: t -*-
# author: Sławomir Liszniański; created: 2025-12-04
"""
Stage 2 package: MIR and HIR→MIR lowering.

Pipeline placement:
  stage0 (AST) → stage1 (HIR) → stage2 (MIR) → SSA → LLVM/obj

Public API:
  - MIR node classes (instructions, terminators, blocks, functions)
  - MirBuilder and HIRToMIR lowering entry point
"""

from .mir_nodes import (
	MNode,
	MInstr,
	MTerminator,
	ConstInt,
	ConstUint,
	ConstUint64,
	IntFromUint,
	UintFromInt,
	ConstBool,
	ConstString,
	ConstFloat,
	FnPtrConst,
	ZeroValue,
	StringRetain,
	StringRelease,
	CopyValue,
	DropValue,
	MoveOut,
	StringFromInt,
	StringFromBool,
	StringFromUint,
	StringFromFloat,
	LoadLocal,
	StoreLocal,
	AddrOfLocal,
	AddrOfArrayElem,
	LoadRef,
	StoreRef,
	ConstructStruct,
	ConstructVariant,
	VariantTag,
	VariantGetField,
	StructGetField,
	AddrOfField,
	LoadField,
	StoreField,
	LoadIndex,
	StoreIndex,
	ArrayLit,
	ArrayAlloc,
	ArrayElemInit,
	ArrayElemInitUnchecked,
	ArrayElemAssign,
	ArrayElemDrop,
	ArrayElemTake,
	ArrayDrop,
	ArrayDup,
	ArrayIndexLoad,
	ArrayIndexLoadUnchecked,
	ArrayIndexStore,
	ArraySetLen,
	ArraySetGen,
	ArrayLen,
	ArrayCap,
	ArrayGen,
	RawBufferAlloc,
	RawBufferDealloc,
	RawBufferPtrAt,
	RawBufferRead,
	RawBufferWrite,
	StringLen,
	StringEq,
	StringCmp,
	StringConcat,
	Call,
	CallIndirect,
	ConstructDV,
	ConstructError,
	ErrorAddAttrDV,
	ConstructResultOk,
	ConstructResultErr,
	ResultIsErr,
	ResultOk,
	ResultErr,
	ErrorAttrsGetDV,
	DVAsInt,
	DVAsBool,
	DVAsString,
	ErrorEvent,
	UnaryOpInstr,
	BinaryOpInstr,
	AssignSSA,
	Phi,
	Goto,
	IfTerminator,
	Return,
	Unreachable,
	BasicBlock,
	MirFunc,
)
from .hir_to_mir import MirBuilder, HIRToMIR, make_builder

__all__ = [
	"MNode",
	"MInstr",
	"MTerminator",
	"ConstInt",
	"ConstUint",
	"ConstUint64",
	"IntFromUint",
	"UintFromInt",
	"ConstBool",
	"ConstString",
	"ConstFloat",
	"FnPtrConst",
	"ZeroValue",
	"StringRetain",
	"StringRelease",
	"CopyValue",
	"DropValue",
	"MoveOut",
	"StringFromInt",
	"StringFromBool",
	"StringFromUint",
	"StringFromFloat",
	"LoadLocal",
	"StoreLocal",
	"AddrOfLocal",
	"AddrOfArrayElem",
	"LoadRef",
	"StoreRef",
	"ConstructStruct",
	"ConstructVariant",
	"VariantTag",
	"VariantGetField",
	"StructGetField",
	"AddrOfField",
	"LoadField",
	"StoreField",
	"LoadIndex",
	"StoreIndex",
	"ArrayLit",
	"ArrayAlloc",
	"ArrayElemInit",
	"ArrayElemAssign",
	"ArrayElemDrop",
	"ArrayElemTake",
	"ArrayDrop",
	"ArrayDup",
	"ArrayIndexLoad",
	"ArrayIndexStore",
	"ArraySetLen",
	"ArraySetGen",
	"ArrayLen",
	"ArrayCap",
	"ArrayGen",
	"RawBufferAlloc",
	"RawBufferDealloc",
	"RawBufferPtrAt",
	"RawBufferRead",
	"RawBufferWrite",
	"StringLen",
	"StringEq",
	"StringCmp",
	"StringConcat",
	"Call",
	"CallIndirect",
	"ConstructDV",
	"ConstructError",
	"ErrorAddAttrDV",
	"ConstructResultOk",
	"ConstructResultErr",
	"ResultIsErr",
	"ResultOk",
	"ResultErr",
	"ErrorAttrsGetDV",
	"DVAsInt",
	"DVAsBool",
	"DVAsString",
	"ErrorEvent",
	"UnaryOpInstr",
	"BinaryOpInstr",
	"AssignSSA",
	"Phi",
	"Goto",
	"IfTerminator",
	"Return",
	"Unreachable",
	"BasicBlock",
	"MirFunc",
	"MirBuilder",
	"make_builder",
	"HIRToMIR",
]
